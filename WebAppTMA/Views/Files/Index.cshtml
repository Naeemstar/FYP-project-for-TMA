@model IEnumerable<WebAppTMA.Models.File>

@{
    ViewBag.Title = "Index";
    //Layout = "~/Views/Shared/_DashboradLayout.cshtml";
}

<head>
    <style>
        .con {
            margin-top: 150px;
            margin-left: 250px;
        }

        th {
            background-color: #4CAF50;
            color: white;
        }
    </style>
</head>
<div class="container">
    <div class="con">

        <h2 style="text-align:center;color:blue;">Files List</h2>


        <table class="table table-striped table-bordered">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.submit_from)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.sumitionDate)
                </th>
                <th>
                   Message
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.submit_to)
                </th>
                
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.sumitionDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.FilePath)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.submit_to)
                </td>

                <td>
                    <button class="editbtn" data-id="@item.Id" style="width:150px;height:40px;"><i class="fas fa-edit"></i></button>|

                    @*@Html.ActionLink("Details", "Details", new { id = item.Id })*@ 
                    <button class="deletbtn" product="@item.Id" style="width:150px;height:40px;"><i class="fas fa-trash-alt"></i></button>
                </td>
            </tr>
            }

        </table>
        <button class="btn btn-primary" id="nwbtn">NEW File</button>
    </div>
    </div>
        <script>
            $("#nwbtn").click(function () {

                $.ajax({
                    url: '/Files/Create/',


                })
                    .done(function (response) {
                        $("#actioncontainer").html(response);
                    })
                    .fail(function (XMLHttpRequest, TextStatus, errorThrown) {
                        alert("fail");
                    })
            });
            $(".editbtn").click(function () {

                $.ajax({
                    url: '/Files/Edit/',
                    data: {
                        ID: $(this).attr('data-id')
                    }

                })
                    .done(function (response) {
                        $("#actioncontainer").html(response);
                    })
                    .fail(function (XMLHttpRequest, TextStatus, errorThrown) {
                        alert("fail");
                    })
            });
            $(".deletbtn").click(function () {

                if (confirm("Are you want to delete this things!") == true);
                {

                    $.ajax({
                        type: 'POST',
                        url: '/Files/Delete/',
                        data: {
                            ID: $(this).attr('product')
                        }

                    })
                        .done(function (response) {
                            $("#tablcontainer").html(response);
                        })
                        .fail(function (XMLHttpRequest, TextStatus, errorThrown) {
                            alert("fail");
                        })


                }




            });
            $(document).ready(function () {
                $("#nwbtn").click(function () {
                    alert("please scroll upword to add new file");



                });
            });
        </script>
